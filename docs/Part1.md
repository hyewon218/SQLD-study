# 1. 데이터 모델링의 이해

## 엔티티의 특징
(만족하지 못하면 부적절한 엔티티일 확률이 높음)
- 반드시 해당 업무에서 필요하고 관리하고자 하는 정보
- 유일한 식별자에 의해 식별 가능
- 영속적으로 존재하는 인스턴스의 집합
- 엔티티는 업무 프로세스에 의해 이용
- 엔티티는 반드시 속성이 있어야 함
- 엔티티는 다른 엔티티와 최소 한 개 이상 관계가 있음

<br>

### 📍 엔티티는 반드시 속성이 있어야 함
- 속성을 포함하지 않고 엔티티 이름만 가지면 관계가 생략되거나 업무 분석이 미진하여 속성정보가 누락될 수 있음
- 주식별자만 존재하고 일반속성이 없는 경우도 부적절한 엔티티
- 📌 **예외적으로** **관계엔티티는 주식별자 속성만 가져도 엔티티로 인정**

<br>

## 엔터티의 분류
### 1) 유무형에 따른 분류
- `유형엔터티`: **물리적인 형태**가 있고, 안정적이며 지속적으로 활용되는 엔터티 예) 사원, 물품, 강사
- `개념엔터티`: 물리적인 헝태는 존재하지 않고 **개념적 정보로 구분**되는 엔터티 예) 조직, 보험상품
- `사건엔터티`: **업무를 수행함에 따라 발생되는 엔터티**로 비교적 발생량이 많으며 각종 통계에 이용될 수 있음 예) 주문, 청구, 미납

### 2) 발생시점에 따른 분류
- `기본엔터티` (Fundamental Entity, Key Entity) 
  - 업무에 원래 존재하는 정보
  - 엔터티와의 관계에 의해 생성되지 않고 **독립적으로 생성 가능** 
  - 타 엔터티의 **부모** 역할
  - 다른 엔터티로부터 주식별자를 상속받지 않고 **자신의 고유한 주식별자를 갖는다**.
  - 예) 사원, 부서, 고객, 상품, 자재

- `중심엔터티` (Main Entity)
  - **기본엔터티로부터 발생**
  - 업무에서 중심적인 역할을 한다.
  - 데이터의 양이 많이 발생되고 다른 엔터티와의 관계를 통해 많은 행위엔터티를 생성한다.
  - 예) 계약, 사고, 예금원장, 청구, 주문, 매출

- `행위엔터티` (Active Entity)
  - 두 개 이상이 부모엔터티로부터 발생되고 자주 내용이 바뀌거나 데이터량이 증가된다.
  - 분석초기 다계에서는 잘 나타나지 않으며 상세 **설계단계나 프로세스와 상관모델링을 진행하며서 도출**될 수 있다.
  - 예) 주문목록, 사원변경이력

<br>

## 모델에 표현하는 트랜잭션의 이해

| 항목         | 식별자관계                                                                       | 비식별자관계                                                                                                                  |
|------------|-----------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
| 목적         | 강한 연결관계 표현                                                                  | 약한 연결관계 표현                                                                                                              |
| 자식 주식별자 영향 | 자식 **주식별자**의 구성에 포함됨                                                        | 자식 **일반 속성**에 포함됨                                                                                                       |
| 표기법        | **실선** 표현                                                                   | **점선** 표현                                                                                                               |
| 연결 고려사항    | - 반드시 부모엔터티 종속<br>- 자식 주식별자 구성에 부모 주식별자포함 필요<br>- 상속받은 주식별자속성을 타 엔터티에 이전 필요 | - 약한 종속관계<br>- 자식 주식별자 구성을 독립적으로 구성<br>- 자식 주식별자 구성에 부모 주식별자 부분 필요<br>- 상속받은 주식별자 속성을 타 엔터티에 차단 필요<br>- 부모쪽의 관계참여가 선택관계 |


<br>

## NULL 속성의 이해
NULL 은 값이 정의되지 않은 미지의 값이다. 즉 0이나 공백이 아닌, 값이 정해지지 않은 것이다.
### NULL 과 연산을 수행하면 항상 NULL
- NULL 과 연산을 수행하면 그 결과는 NULL 이다.
- NULL 인 경우 `NVN()` 함수를 이용해서 **NULL 을 0 또는 다른 값으로 대체**해서 사용해야 한다.<br>
  <img src="https://github.com/hyewon218/kim-jpa2/assets/126750615/03f1ae7f-788c-4c51-ab30-f139be8d5f0e" width="50%"/><br>


### 📍 집계함수는 NULL 값을 제외(무시)
- 행 수를 계산하는 COUNT() 를 사용할 때, **칼럼에 NULL 이 표함되어 있으면 그 행은 제외한다**.<br> 
- 하지만 **COUNT(*) 은 전체 행**이 계산된다.

  <img src="https://github.com/hyewon218/kim-jpa2/assets/126750615/7ba92812-8132-4797-8885-138728a185af" width="50%"/><br>
  > AVG 연산 결과는 NULL 을 무시한 평균을 리턴하므로, NULL 아닌 10 개의 데이터들의 평균을 리턴, 두 번째 수식은 평균을 직접 구한것으로, COMM의 총 합을 총 행이 수인 14로 나눈값이다. 
  > 따라서 이 두 연산결과는 COMM이 NULL을 포함할 경우 항상 다르게 리턴된다. 
  > **NULL 을 무시한 평균**을 얻고자 인지, **전체 14명에 대한 평균**을 계산하고자 함인지에 따라 적절히 선택하여 사용


